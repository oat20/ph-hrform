<?PHP
require("class.phpmailer.php");  // ????????? class phpmailer ???????????? ??????????? path

function smtpmail( $email , $subject , $body)
{
    $mail = new PHPMailer();
    $mail->IsSMTP();         
      $mail->CharSet = "utf-8";  // ????????? ???????????? tis-620 ???? windows-874 ????????????????????
    $mail->Host     = "mumail.mahidol.ac.th"; //  mail server ?????
	$mail->Port       = 25;
    $mail->SMTPAuth = false;     //  ??????????????????? ??? SMTP
    $mail->From     = 'noreply@'.$_SERVER['HTTP_HOST'];  //  account e-mail ???????????????????????
    $mail->FromName = strtoupper($_SERVER['HTTP_HOST']); //  ??????????????? ??????????????????????????
    $mail->AddAddress($email);            // Email ????????????????????(???????????)
    $mail->IsHTML(true);                  // ?? E-mail ??? ???????????????????? tag html ???????? ???? true
    $mail->Subject     =  $subject;        // ?????????????(???????????)
    $mail->Body     = $body;                   // ??????? ???????(???????????)
     $result = $mail->send();
	 $mail->ClearAddresses();       
     return $result;
}

function smtpmail2( $email , $subject , $body, $from, $fromname)
{
    $email_admin = explode(',',$email);
    $mail = new PHPMailer();
    $mail->IsSMTP();         
      $mail->CharSet = "utf-8";  // ????????? ???????????? tis-620 ???? windows-874 ????????????????????                        
    $mail->Host     = "mumail.mahidol.ac.th"; //  mail server ?????
	//$mail->Host     = "mail.mahidol.ac.th";
	$mail->Port       = 25;                   // set the SMTP port
    $mail->SMTPAuth = false;     //  ??????????????????? ??? SMTP
    #$mail->Username = "account@yourdomain.com";   //  account e-mail ??????????????????
	#$mail->Username = "chakkapan.cha@mahidol.ac.th";
    #$mail->Password = "**********";  //  ???????? e-mail ??????????????????
	#$mail->Password = "4134179";

    $mail->From     = $from;  //  account e-mail ???????????????????????
    $mail->FromName = $fromname; //  ??????????????? ??????????????????????????
    foreach($email_admin as $item){
        $mail->AddAddress($item);            // Email ????????????????????(???????????)
    }
    $mail->IsHTML(true);                  // ?? E-mail ??? ???????????????????? tag html ???????? ???? true
    $mail->Subject     =  $subject;        // ?????????????(???????????)
    $mail->Body     = $body;                   // ??????? ???????(???????????)
     $result = $mail->send();
	 $mail->ClearAddresses();       
     return $result;
}

function smtpmail_attach( $email , $subject , $body, $attach='')
{
    $mail = new PHPMailer();
    $mail->IsSMTP();         
      $mail->CharSet = "utf-8";  // ????????? ???????????? tis-620 ???? windows-874 ????????????????????                        
    $mail->Host     = "mumail.mahidol.ac.th"; //  mail server ?????
	//$mail->Host     = "mail.mahidol.ac.th";
	$mail->Port       = 25;                   // set the SMTP port
    $mail->SMTPAuth = false;     //  ??????????????????? ??? SMTP
    #$mail->Username = "account@yourdomain.com";   //  account e-mail ??????????????????
	#$mail->Username = "chakkapan.cha@mahidol.ac.th";
    #$mail->Password = "**********";  //  ???????? e-mail ??????????????????
	#$mail->Password = "4134179";

    $mail->From     = 'phwww@mahidol.ac.th';  //  account e-mail ???????????????????????
    $mail->FromName ='www.ph.mahidol.ac.th'; //  ??????????????? ??????????????????????????
    $mail->AddAddress($email);            // Email ????????????????????(???????????)
    $mail->IsHTML(true);                  // ?? E-mail ??? ???????????????????? tag html ???????? ???? true
    $mail->Subject     =  $subject;        // ?????????????(???????????)
    $mail->Body     = $body;                   // ??????? ???????(???????????)
	
	if($attach!=''){$mail->AddAttachment($attach);}      // attachment
     
	 $result = $mail->send();       
     return $result;
}

function smtpGmail( $email , $subject , $body, $attach='')
{
    $email2=explode('@', $email);
    $mail = new PHPMailer();
    $mail->IsSMTP();         
      $mail->CharSet = "utf-8";  // ????????? ???????????? tis-620 ???? windows-874 ????????????????????

      if($email2[1]=='mahidol.ac.th'){
        $mail->Host     = "mumail.mahidol.ac.th"; //  mail server ?????
	    $mail->Port       = 25;
        $mail->SMTPAuth = false;
      }else{
	  $mail->SMTPSecure='tls';                        
	$mail->Host     = "smtp.gmail.com";
	$mail->Port       = 587;                   // set the SMTP port
    $mail->SMTPAuth = true;     //  ??????????????????? ??? SMTP
    $mail->Username = "phmahidol1@gmail.com";   //  account e-mail ??????????????????
    $mail->Password = "qxwezzcibzusmhcw";  //  ???????? e-mail ??????????????????
      }

    $mail->From     = "noreply@".$_SERVER['HTTP_HOST'];  //  account e-mail ???????????????????????
    $mail->FromName = strtoupper($_SERVER['HTTP_HOST']); //  ??????????????? ??????????????????????????
    $mail->AddAddress($email);            // Email ????????????????????(???????????)
    $mail->IsHTML(true);                  // ?? E-mail ??? ???????????????????? tag html ???????? ???? true
    $mail->Subject     =  $subject;        // ?????????????(???????????)
    $mail->Body     = $body;                   // ??????? ???????(???????????)
     $result = $mail->send();

     if($attach!=''){$mail->AddAttachment($attach);}      // attachment
	 
     $mail->ClearAddresses();       
     return $result;
}

//smtpGmail('chakkapan.cha@gmail.com', 'Test '.date('Y-m-d H:i:s'), 'Test '.date('Y-m-d H:i:s'));
?>